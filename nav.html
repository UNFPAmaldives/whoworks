<!DOCTYPE html>
<html id="index-page" lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=1.0">

<title>How Many Maldivians?</title>
    <meta name="twitter:title" content="Who Abuses Whom in Maldives: 1,500 of the worst things to happen since 2005">
    <meta property="og:title" content="Who Abuses Whom in Maldives: 1,500 of the worst things to happen since 2005">
        <meta name="description" content="According
            to administrative records from the the Family Protection Unit, since
            2005 there have been more than 1,507 cases of abuse to which authorities have responded: These range from alleged neglect to sexual assault,
            as well as self-harm and out-of-wedlock pregnancies.
            Mental health issues also figure prominently, but
            are not depicted here">
            <meta property="og:description" ccontent="According
                to administrative records from the the Family Protection Unit, since
                2005 there have been more than 1,507 cases of abuse to which authorities have
                responded: These range from alleged neglect to sexual assault,
                as well as self-harm and out-of-wedlock pregnancies.
                Mental health issues also figure prominently, but
                are not depicted here">
                <meta name="twitter:description" content="According
                    to administrative records from the the Family Protection Unit, since
                    2005 there have been more than 1,507 cases of abuse to which authorities have
                    responded: These range from alleged neglect to sexual assault,
                    as well as self-harm and out-of-wedlock pregnancies.
                    Mental health issues also figure prominently, but
                    are not depicted here">
    <meta name="keywords" content="migration; migrants; population dynamics; population data">
    <link rel="canonical" href="https://unfpamaldives.github.io/abuse/">
    <meta property="og:url" content="https://unfpamaldives.github.io/abuse/">
    <meta name="twitter:url" content="https://unfpamaldives.github.io/abuse/">
    <link rel="shorturl" href="https://unfpamaldives.github.io/abuse/">
    <meta property="og:image" content="//unfpamaldives.github.io/abuse/drone-db/migration_promo.jpg">
    <meta name="twitter:image" content="//unfpamaldives.github.io/abuse/drone-db/migration_promo.jpg">

    <meta name="twitter:site" content="@unfpamaldives">
    <meta property="article:publisher" content="//www.facebook.com/unfpamaldives">
    <meta property="article:author" content="//www.facebook.com/UNFPAmaldives">
    <!--<meta name="twitter:creator"    content="@username" />-->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="fb:app_id" content="1203881719652746">
    <meta property="og:site_name" content="UNFPA Maldives">
    <meta property="fb:admins" content="1244584375">


    <!-- FILL OUT THISNODE WITH SECTION HERE -->
    <script src="drone-db/head.js"></script>
    <script src="https://unfpamaldives.github.io/abuse/" async="" type="text/javascript"></script>
    <script src="abuse/" async="" type="text/javascript"></script>
    <script type="text/javascript" charset="utf-8">
        var wp_content_type = 'interactive graphics';
        var thisNode = 'world/national-security',
            navNode = thisNode,
            commercialNode = 'national/sensitive',
            wp_channel = 'world', // this should be top level section node only
            wp_section = wp_channel,
            wp_proj_directory  = document.location.pathname.replace('/wp-srv/special', ''),
            wp_page_name = wp_section + ':' + wp_content_type + ':' + wp_proj_directory;
        var wp_track_scrolling = true;
        //var wp_subsection = 'sports - nationals'; // top level - subsection level, usually only used for sports
        var wp_content_category = 'wp - ' + thisNode;
        //var wp_hierarchy = 'sports|nationals'; // top level|subsection level, usually only used for sports
        TWP = window.TWP || {};TWP.Data = {};TWP.base = '//maldives.unfpa.org';eidosBase = TWP.base;TWP.SocialConfig;
    </script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
     ga('create', 'UA-73612892-1', 'auto');
     ga('send', 'pageview');
     
    </script>
    <!-- Le styles -->
    <!-- You will need to fix up your include paths due to subdirectory of project -->
    <link href="drone-db/wpbootstrap.css" rel="stylesheet">
    <link href="drone-db/wpbootstrap-responsive.css" rel="stylesheet">
    <!--
        Foundation Zurb Text Icons Fonts: //www.zurb.com/playground/foundation-icons
        Example usage:
        <i class="general foundicon-settings"></i> (Produces settings cog icon as a font)
    -->
<!-- More style stuff -->


    <link href="drone-db/general_enclosed_foundicons.css" rel="stylesheet">
    <link href="drone-db/general_foundicons.css" rel="stylesheet">
    <link href="drone-db/social_foundicons.css" rel="stylesheet">
    <link href="drone-db/accessibility_foundicons.css" rel="stylesheet">
    <!--[if lt IE 8]>
        <link rel="stylesheet" href="//www.washingtonpost.com/wp-srv/graphics/templates/mobile/assets/fonts/foundation-icons/css/accessibility_foundicons_ie7.css">
        <link rel="stylesheet" href="//www.washingtonpost.com/wp-srv/graphics/templates/mobile/assets/fonts/foundation-icons/css/general_enclosed_foundicons_ie7.css">
        <link rel="stylesheet" href="//www.washingtonpost.com/wp-srv/graphics/templates/mobile/assets/fonts/foundation-icons/css/general_foundicons_ie7.css">
        <link rel="stylesheet" href="//www.washingtonpost.com/wp-srv/graphics/templates/mobile/assets/fonts/foundation-icons/css/social_foundicons_ie7.css">
    <![endif]-->
    <!-- End Foundation Icon Fonts -->
    <link href="drone-db/colors.css" rel="stylesheet">
    <link href="drone-db/fonts.css" rel="stylesheet">
    <!--[if IE]>
        <link rel="stylesheet" href="//www.washingtonpost.com/wp-srv/graphics/templates/mobile/css/iefonts.css" type="text/css" charset="utf-8" />
    <![endif]-->
    <link href="drone-db/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://css.washingtonpost.com/wp-srv/graphics/templates/mobile/css/font-awesome.min.css" rel="stylesheet">
    <link href="drone-db/inline.css" rel="stylesheet">
    <link href="drone-db/wp_002.css" rel="stylesheet">
    <link href="drone-db/wp-responsive.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="drone-db/pretty-comments.css">
    <link href="drone-db/mobile-base.css" rel="stylesheet">
    <link href="drone-db/base.css" rel="stylesheet">  

    <!-- INCLUDE YOUR OWN CSS FILE HERE -->
    <link rel="stylesheet" type="text/css" href="drone-db/drones-db.css">
        <link rel='stylesheet prefetch' href='css/nv.d3.css'>
        <link rel="stylesheet" href="css/style.css">
    <link rel='stylesheet prefetch' href='css/c3.min.css'>
        <link rel="stylesheet" href="css/stylegraph.css">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="drone-db/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="drone-db/apple-icon-144x144.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="drone-db/apple-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="drone-db/apple-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" href="drone-db/apple-icon-57x57.png">

    <!-- Core AD code includes -->
    <script type="text/javascript" src="drone-db/jquery-min.js"></script>


<!-- Main Bootstrap Functionality, Controls Menu -->
<script type="text/javascript" src="drone-db/bootstrap.js"></script>
<!-- Main Controls JS -->
<script type="text/javascript" src="drone-db/wpcontrols.js"></script>
<script type="text/javascript" src="drone-db/twp.js"></script>
<script type="text/javascript" src="drone-db/mobile-base-1.js"></script>
    </head>

<!-- SCRIPTS CUSTOMIZED FOR THIS VIZ -->
 <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
      <script src="d3.parsets.js" charset="utf-8"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>


    
    <!--[if lt IE 7]><body class="ie6 d3-ie"><![endif]-->
    <!--[if IE 7]><body class="ie7 d3-ie"><![endif]-->
    <!--[if IE 8]><body class="ie8 d3-ie"><![endif]-->
    <!--[if gt IE 8]><!--><body>
        <!-- GLOBAL RESPONSIVE HEADER -->
    <div id="nav">
            <a class="branding" href="http://maldives.unfpa.org/">
                <div class="hidden-phone">
                    <img class="" src="drone-db/unfpa115px.png" alt="UNFPA Maldives">
                        </div>
                <div class="visible-phone">
                    <img class="" src="drone-db/unfpa@60px.png" alt="UNFPA Maldives">
                        </div>
            </a>

                <div class="series-sig">How Many Maldivians?</div>


<!--         <p class="title">
            <a href="#main-container">A swing of beauty</a>
        </p> -->
        <ul class="sections nav">
            <li class="share">
                <a href="#">
                    <span class="text">Share</span>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <li id="dd-share-em"><a href="" title="Email" target="_blank"><i class="icon-envelope-alt mr5"></i> Email</a></li>
                    <li class="divider show-for-medium-and-up"></li>
                    <li id="dd-share-fb"><a href="" target="_blank"><i class="icon-facebook mr5"></i> Facebook</a></li>
                    <li class="divider show-for-medium-and-up"></li>
                    <li id="dd-share-tw"><a href="" target="_blank"><i class="icon-twitter mr5"></i> Tweet</a></li>
                </ul>
            </li>
                <!-- <li class="comment visible-desktop">
                <a href="#comments">
                    <span class="icon">
                        <img src="//www.washingtonpost.com/wp-srv/special/sports/cycling/images/comment-icon.png">
                    </span>
                    <span class="text">Comment</span>
                </a>
            </li> -->
        </ul>
        <div class="clear"></div>
    </div>

<!-- END GLOBAL RESPONSIVE NAV -->

<!-- SECTION Logo Container for Header (remove "hidden" and add "visible-phone" class to show and hide toplogo) -->
<div id="mobile-header" class="visible-phone">
    <!--  <div class="navbar tight navbarlogo navsection">
        <div class="pagination-centered">
            <!-- Replace this link with section direct link or leave as home 
            <a href="https://unfpamaldives.github.io/abuse" title="UNFPA Maldives">
                <img src="drone-db/android-icon-36x36.png" class="UNFPA tiny" alt="UNFPA Maldives">
                   REPLACE with Section name 
                    <h1 id="pagetitle" class="wptitle blacktxt">Data</h1>
                    </a> 
                -->
        </div>
    </div>
</div>
<!-- END SECTION Logo Container for Header -->

    <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
    <!-- !!!!!!!!!! MAIN CONTENT STARTS HERE !!!!!!!!!! -->
    <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->


    <h1>Got work?</h1>
<p class="meta">Explore the Maldives' working-age population force. More expository text goes here.<br>
<p class="meta">Drag, click, mouseover, and rearrange the bars and ribbons to learn more.<br>
<p class="meta">This may take a moment to load.</p>

</p><h2>Who works in Maldives, who doesn't, and why</h2>

<div height="800px" style="float:left;">

  <div class="drop" width="80%">

  </div>
      <div width="100%">
        <div id="visDiv" style="float:left;" ></div>
<div class="options">
  <span class="source">Data: <a href="http://statisticsmaldives.gov.mv/census-2014/">2014 Maldives Census, NBS</a>.</span>
       </div>
</div>
<br>

  <form id="selection" style="float:right;">
  </form>
  <input style="float:left;" type="range" data-show-value="true" name="points" id="slider" value="75" min="50" max="100">Tension</input>

    <script>
      var data,vis,props,csv,bend;

      var reload = function(dataURL){
        d3.csv(dataURL,
          function(dataset){
            vis.loadData(dataset);
            vis();

        });
      }
      var drawVis = function(dat){
        csv=dat;
        props = [];
        var selection = document.getElementById("selection");
        var childButton = function(name){
          var button = document.createElement("input");
          var val = document.createElement("p");
          button.type = "checkbox";
          button.id = name;
          button.value = name;
          button.checked = true;
          val.innerHTML = name;
          val.appendChild(button);

          return val;
        }
        selection.innerHTML ="";
        for (var p in csv[0]){
          props.push(p);
          selection.appendChild(childButton(p));
        }
        data = csv;
        chart = d3.parsets()
        .dimensions(props)
        .tension(.90);

        vis = d3.select("#visDiv").append("svg")
            .attr("width", chart.width())
            .attr("height", chart.height());
        vis.datum(csv).call(chart);
      }
      var update = function(){


        chart = d3.parsets()
        .dimensions(props)
        .tension(bend);

        if (arguments.length){
          d3.select("#visDiv").html("");
           vis = d3.select("#visDiv").append("svg")
               .attr("width", chart.width())
              .attr("height", chart.height());
        }

        vis.datum(csv).call(chart);
      }

      function handleFileSelect(evt){
        var f;
        var reader = new FileReader();
          reader.onloadend = (function(file) {
              return function(e) {
                d3.select("#visDiv").html("");
                //Should call d3.CSV and re-draw
                console.log(" Uploaded the file");

                d3.csv(e.target.result, function(error, storCSV) {
                  csv=storCSV;
                  drawVis(csv);
                });

              };
            })(f);
        if(evt.stopPropagation){
          evt.stopPropagation();
          evt.preventDefault();
          f = evt.target.files[0];
          reader.readAsDataURL(f);
        }
        else{
          reader.onloadend(evt);
        }




    }
        

        var handleReload = function(evt){
          evt.stopPropagation();
          evt.preventDefault();
          var b = props.length;
          props = [];
          $("input[type=range]").each(function(){
            bend = this.value/100.0;
          });


          $("input[type=checkbox]:checked").each(function(){props.push(this.id)})
          if(b==props.length){update();}
          else{update(1)}

        }



       d3.csv("ResMal_keyvars.csv",drawVis);
      document.getElementById('selection').addEventListener('change',handleReload,false);
      document.getElementById('slider').addEventListener('change',handleReload,false);


    </script>
    <br>
    <br>
    <br><br><br><br><br><br><br><br><br><br>
  </body>
</html>